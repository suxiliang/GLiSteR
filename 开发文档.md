# 开发文档

## 项目概述

> 初赛阶段完成

### 项目背景

> 用简明扼要的文字叙述清楚该项目所涉及的（业务/技术）领域的现状及存在的问题，对于该项目要解决的问题目前已有的最新、最优解决方案。

### 项目定位

#### 应用场景

> 需要重点突出这些场景下的作者观察到的，并且准备在作品里面解决的痛点。

#### 目标人群

### 项目方案

> 用简明扼要的文字叙述清楚该项目中问题空间到解空间的映射关系，比如：“对于xxx问题，该项目通过xxx来实现xxx”。

### 项目目标

### 项目价值



## 2    开发计划
> 初赛阶段完成
### 2.1   最终呈现形式

 软件：具有完整功能的应用软件

文档：技术研究报告，项目开发文档，项目测试文档，创新性分析报告

核心技术：用户情绪识别并与音乐情绪相匹配，一定范围内用户信息共享

### 2.2   主要功能描述

产品将听歌作为用户主要活动，在传统的获取歌曲后收听歌曲的基础上开发情绪识别、音乐手账、音乐可视化、音乐助手等多项功能，涵括音乐推荐、个人记录、社交娱乐等模块。

#### 2.2.1   音乐推荐模块

产品可以根据用户情绪、用户场景、好友信息等输入进行音乐推荐。

**1.**   **情绪匹配功能**

通过用户编写的心情日记、手环记录、与音乐助手对话、当前时间和天气等数据识别用户情绪，为用户推荐相关情绪歌曲，达到舒缓负面情绪，保持良好情绪的目的。

**2.**   **场景感知功能**

使用场景感知相关的接口，通过移动设备的状态，感知用户当前的运动状态，推荐符合状态的音乐。例如在用户跑步的时候可以推荐节奏感较强的歌曲，或是直接推荐适合跑步的歌单。

**3.**   **音乐助手功能**

使用AI问答机制，可以在与用户的交流过程中，分析用户情绪，作为音乐推荐的一个输入指标。除此之外，还提供互动小游戏、软件功能快捷入口。

**4.**   **好友推荐功能**

为了增强好友之间的互动性，会对好友在听的歌曲进行部分推荐。

#### 2.2.2   个人记录模块

音乐常常会引起用户思绪，激发用户思考，为了方便用户记录，本产品为用户提供了音乐手账、音乐可视化的功能。

**1.**   **音乐手账功能**

音乐手账允许用户以文字、图片、表情、相关歌曲的形式记录心情状态。可以按照日期，不同类型对记录的内容进行划分，方便用户查看。如果用户愿意，也可以选择以匿名或是公开的方式发布到广场上，与其他用户共享。

**2.**   **音乐可视化功能**

当用户听到符合自己心情或是状态的歌曲时，可以通过音乐可视化的功能对该歌曲进行从听觉向视觉的转化，生成手机壁纸或是手表表盘，将抽象化的音频具象化，更好地记录所喜爱的歌曲。

#### 2.2.3   社交娱乐模块

随着交友方式的多样化，音乐交友的形式也逐渐进入市场，本产品同时为有社交需求的群体提供了社交和互动的平台。

**1.**   **近场共享功能**

用户通过开启近场功能，在其他人开放权限的前提下，可以与路过的人共享歌单，营造出“擦肩而过”的氛围感；也可以聆听处在同一个空间中的其他人正在享受的音乐，获得“同频共振”的互动感。

**2.**   **社区交流功能**

用户可以通过搜索id的形式添加好友，关注好友动态。对于非好友用户，可以在社区广场上公开发布自己的想法和感受，与他人交流；也允许通过匿名的方式在树洞中写下悄悄话，等待着有缘人产生共鸣。

### 2.3   运行环境

#### 2.3.1   手机端

1. Android系统

| 硬件 | 内存     | 8G以上                   |
| ---- | -------- | ------------------------ |
| 软件 | 操作系统 | 支持Android4.2及以上版本 |

2. iOS系统

支持iphone6及以上版本

#### 2.3.2   手表/手环端

具备心率检测功能的手表/手环。

 

### 2.4   验收标准

#### 2.4.1   验收内容

**1.**   **功能验收**

对需求分析中功能需求所提到的所有功能进行逐一测试，要求如下：

（1）  不存在错误等级为1的错误；

（2）  不存在错误等级为2的错误；

（3）  错误等级为3的错误数量≤5；

（4）  所有提交的错误都已得到更正；

（5）  测试用例不通过数的比例<1.5%。

**2.**   **非功能验收**

要求系统具有较强的容错性、安全性和易用性，响应时间等性能达到需求分析中要求的。

**3.**   **文档验收**

要求各文档内容完整，表述正确清晰，易于理解。文档包括：

（1）  项目开发文档；

（2）  技术研究报告；

（3）  创新性分析报告；

（4）  项目测试文档。

#### 2.4.2   错误类型定义

**1.**   **一级错误描述**

属于致命错误。如：没有实现或错误地实现重要功能；业务流程存在重大隐患；系统在操作过程中由于系统自身的原因自动退出系统或出现死机的情况；系统在操作过程中由于系统自身的原因对系统或数据造成破坏；在现有的软、硬件环境下不能实现应有的功能。

**2.**   **二级错误描述**

属于严重错误。没有实现基本功能，并且不存在替代办法；没有实现重要功能中的部分功能，并且不存在替代办法；业务流程衔接错误；用户的权限分配不合理；没有满足系统的性能要求。

**3.**   **三级错误描述**

属于一般错误。与二级错误相对应，而三级错误则存在代替方法；对误操作或错误操作没有提示，导致非法数据进入数据；用户界面差和操作时间长。

**4.**   **四级错误描述**

属于微小错误。通常为易用性方面的错误，对功能性没有影响。比如界面不友好、前后风格不一；中英文混杂；查询结果输出不直观等。

### 2.5   关键问题
> 说明可能影响项目的关键问题，如设备条件、技术焦点或其他风险因素，并说明对策。

**1.**   **情绪识别的精确度**

本项目很重要的一个推荐来源是用户的情绪识别，需要对相关的多源数据进行较好的提取与整合，确保识别的情绪不会出现较大的误差，并能与歌曲的情绪特征实现良好匹配。

**2.**   **跨平台的共享**

产品希望在多设备之间产生交流与融合，包括不同用户的手机端和同一用户的不同设备，需要设备间实现合理的算力调度与信息共享。

 

### 2.6   进度安排

| **内容**                     | **完成时间**   |
| ---------------------------- | -------------- |
| **完成功能设计**             | **2022.12.10** |
| **完成主要模型选型**         | **2023.1.16**  |
| **完成原型图设计**           | **2023.1.30**  |
| **初步完成情绪识别模块**     | **2023.3.1**   |
| **初步完成近场通信模块**     | **2023.3.8**   |
| **初步完成推荐系统模块**     | **2023.3.10**  |
| **测试并改进上方3个模块**    | **2023.3.15**  |
| **根据原型图制作大部分界面** | **2023.3.15**  |
| **完成社交娱乐模块后端搭建** | **2023.3.23**  |
| **完成个人记录模块后端搭建** | **2023.3.25**  |
| **完成前后端对接**           | **2023.3.26**  |
| **将各模型整合至App中**      | **2023.3.30**  |
| **测试App并优化**            | **2023.4.6**   |
| **性能与美观进一步优化**     | **2023.4.14**  |
| **项目完成**                 | **2023.4.15**  |

 

### 2.7   开发预算
> 此项对基于硬件和依赖于其他平台及服务的项目十分重要。

| 名称      | 预算        |
| --------- | ----------- |
| GPU服务器 | 4812元/半年 |
| 云数据库  | 1300元/半年 |
| 云服务器  | 689云/半年  |


## 可行性分析

> 初赛阶段完成

### 技术可行性分析

### 资源可行性分析


### 市场可行性分析

#### 市场需求分析

随着互联网的广泛应用，音乐也从早年的黑胶唱片等逐渐变成了一个个的数据文件，人们可以通过互联网、通过app来听各种音乐，只要是收录过的，不管是多少年前，只要是还存在，人们就能够听到和欣赏到音乐，音乐不再有以往那些唱片，唱片机的条件和空间限制，而是能够随时随地听到各种音乐。而各大厂商不只是在音乐版权，源文件下功夫，也搞了各种大数据推荐，社交，直播，app的功能确实是越来越多。然而，人们大多数只能够通过排行榜，风格，歌手等来进行搜索相应的歌曲，或者听着来自应用大数据推荐的自己喜欢风格或歌手的音乐，对用户来说，一首歌曲一般是主观获取的。但是很多时候，人在不同情况，不同情境下的情绪等不同，所需要的音乐也不尽相同，如果一款app能够照顾到使用者的情绪或者是所处的情景来进行推荐音乐，在伤心时给予安慰，在高兴时与其同乐，在受挫时给予鼓励；当用户在图书馆、自习室时候自动播放放松舒缓的学习轻音乐，在跑步时自动推荐一些节奏感强的音乐，又或者在两个陌生人邂逅时，能够彼此获取到对方正在听的歌曲，这将会更好的发挥音乐的作用，更好的调节人们的情绪、保证其状态、进行情绪上的沟通。同时app也能通过不同方式获取用户的情绪给予记录并生成相应的日历，最后给用户以展示。那这款app势必会更有利于用户认识到相同情绪的人、感受到来自音乐的力量。

#### 竞品分析

<table>
	<tr>
	    <th rowspan="3">产品名称</th>
	    <th rowspan="3">产品定位</th>
	    <th colspan="11">功能模块</th>
	    <th colspan="2">优缺点分析</th> 
	</tr >
    <tr >
	    <td rowspan="2">音乐播放</td>
	    <td rowspan="2">曲库</td>
	    <td rowspan="2">音乐手账</td>
        <td colspan="4">音乐推荐</td>
	    <td rowspan="2">歌单</td>
        <td rowspan="2">社交</td>
	    <td rowspan="2">音乐助手</td>
        <td rowspan="2">音乐可视化</td>
        <td rowspan="2">优点</td>
        <td rowspan="2">缺点</td>
	</tr>
    <tr >
	    <td>大数据推荐</td>
	    <td>近场（氛围推荐）</td>
	    <td>情绪推荐</td>
        <td>邂逅推荐</td>
	</tr>
	<tr >
	    <td>
            qq音乐
        	<img src="image/qq音乐.png">
        </td>
	    <td>优质音乐资源服务平台与音乐播放器</td>
        <td>√</td>
        <td>√</td>
	    <td>×</td>
        <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>√</td>
        <td>√</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.音乐版权多，
            2.用户基数大，
            3.功能更多更完善
            4.音质更好
        </td>
        <td>
            1.功能太赘余，分类没做好，
            2.ui界面太繁琐，
            3.无法根据用户的情绪，所处氛围等进行推荐，人性关怀不够。
        </td>
    </tr>
    <tr>
        <td>
            网易云音乐
            <img src="image/网易云音乐.png">
        </td>
        <td>移动音乐社区</td>
        <td>√</td>
        <td>√</td>
	    <td>×</td>
        <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>√</td>
        <td>√</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.社交功能更完善，有音乐社区基础
            2.一起听功能比较好
        </td>
        <td>
            1.无法根据用户的情绪，所处氛围等进行推荐，人性关怀不够。       
            2.音乐版权劣势
        </td>
    </tr>
    <tr>
        <td>
            酷狗音乐概念版
            <img src="image/酷狗音乐概念版.png">
        </td>
        <td>打造一款基于音乐分享的交流社区</td>
        <td>√</td>
        <td>√</td>
	    <td>×</td>
        <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>√</td>
        <td>√</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.播放页面更加清爽
            2.频道中甚至加了自习室等功能
        </td>
        <td>
            1.无法根据用户的情绪，所处氛围等进行推荐，人性关怀不够。       
            2.评论区比较拉跨，人少，内容质量不高。
        </td>
    </tr>
    <tr>       
        <td>
            波点音乐
            <img src="image/波点音乐.png">
        </td>
        <td>极简，个性化，深度互动，社交</td>
        <td>√</td>
        <td>√</td>
	    <td>×</td>
        <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>√</td>
        <td>√</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.播放页面更加清爽
            2.留言墙的评论样式更加好看。
            2.社交上波波宇宙，来寻找可能志同道合的陌生人。
        </td>
        <td>
            1.无法根据用户的情绪，所处氛围等进行推荐，人性关怀不够。       
            2.功能相较于其他软件稍微少一点。
        </td>
    </tr>
	<tr>
	    <th rowspan="3">产品名称</th>
	    <th rowspan="3">产品定位</th>
	    <th colspan="11">功能模块</th>
	    <th colspan="2">优缺点分析</th> 
	</tr >
    <tr >
	    <td rowspan="2">音乐播放</td>
	    <td rowspan="2">曲库</td>
	    <td rowspan="2">音乐手账</td>
        <td colspan="4">音乐推荐</td>
	    <td rowspan="2">歌单</td>
        <td rowspan="2">社交</td>
	    <td rowspan="2">音乐助手</td>
        <td rowspan="2">音乐可视化</td>
        <td rowspan="2">优点</td>
        <td rowspan="2">缺点</td>
	</tr>
    <tr >
	    <td>大数据推荐</td>
	    <td>近场（氛围推荐）</td>
	    <td>情绪推荐</td>
        <td>邂逅推荐</td>
	</tr>
	<tr >
	    <td>
            Moodistory
        	<img src="image/Moodistory.png">
        </td>
	    <td>轻松上手的情绪追踪器</td>
        <td>×</td>
        <td>×</td>
	    <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.能够通过简单的文字和表情来记录每天的情绪
            2.通过日历，分布图等形式来呈现，并且能够生成pdf等导出、分享。
            3.操作简单、操作简捷，页面简洁。
        </td>
        <td>
            只对情绪进行记录和统计分析，保证了情绪的私密性，但不能对用户情绪进行安慰等行为，在用户的人文关怀上不够到位。
        </td>
    </tr>
    <tr >
	    <td>
            Moodio
        	<img src="image/Moodio.png">
        </td>
	    <td>简单记录心情，对数据统计分析</td>
        <td>×</td>
        <td>×</td>
	    <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>x</td>
        <td>x</td>
       <td>
            1.能够通过简单的表情符号来记录每天的情绪
            2.通过日历，分布图等形式来呈现
            3.操作简单、操作简捷，页面简洁。
        </td>
        <td>
            只对情绪进行记录和统计分析，保证了情绪的私密性，但不能对用户情绪进行安慰等行为，在用户的人文关怀上不够到位。
        </td>
    </tr>
</table>


#### 自我分析

采用---算法，通过多设备多输入解决了对用户情绪的收集，从而能够通过当前的情绪来进行推荐合适的音乐来处理情绪。

采用---算法，实现了通过情绪，歌词等来生成可视化壁纸。

采用---算法，实现了能够问答的AI音乐助手，可以通过问答来分析用户的情绪，还添加了部分功能的快捷入口。

采用---算法，能够通过移动设备（主要是手机和手表）所处的状态等来判断用户的状态和所处氛围，然后进行场景氛围推荐。

采用---算法，能够实现近场通讯，“同频匹配”，可以与路过的人匹配，也可以和共处一个空间的人匹配。

实现了情绪社区和情绪日记，能够匿名或实名在社区中寻找到和自己相似的人，也能够通过在树洞留下悄悄话等待着有缘人的到来。

<table>
	<tr>
	    <th rowspan="3">产品名称</th>
	    <th rowspan="3">产品定位</th>
	    <th colspan="11">功能模块</th>
	    <th colspan="2">优缺点分析</th> 
	</tr >
    <tr >
	    <td rowspan="2">音乐播放</td>
	    <td rowspan="2">曲库</td>
	    <td rowspan="2">音乐手账</td>
        <td colspan="4">音乐推荐</td>
	    <td rowspan="2">歌单</td>
        <td rowspan="2">社交</td>
	    <td rowspan="2">音乐助手</td>
        <td rowspan="2">音乐可视化</td>
        <td rowspan="2">优点</td>
        <td rowspan="2">缺点</td>
	</tr>
    <tr >
	    <td>大数据推荐</td>
	    <td>近场（氛围推荐）</td>
	    <td>情绪推荐</td>
        <td>邂逅推荐</td>
	</tr>
	<tr >
	    <td>
            情音（bushi）
        </td>
	    <td>一款主打用户情绪的人性化音乐app</td>
        <td>×</td>
        <td>×</td>
	    <td>√</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>×</td>
        <td>x</td>
        <td>x</td>
        <td>
            1.可以图片文字表情歌曲等形式记录心情状态，以日历等形式进行展示
            2.可以对音乐的情绪标签和歌词等进行多设备可视化展示。
            3.能够通过多种输入（心情日记，手环记录，音乐助手等）来分析用户的情绪，从而进行情绪推荐
            4.能够通过场景感知来观测用户状态从而进行推荐。
            5.能够实现近场通讯，同频匹配，在用户许可的情况下，允许邂逅的人们能够听到他人在听的歌曲。
            6.添加了音乐助手，能够提供功能的快捷入口；能够与用户进行问答，从而获取用户的情绪信息等、
        </td>
        <td>
            只对情绪进行记录和统计分析，保证了情绪的私密性，但不能对用户情绪进行安慰等行为，在用户的人文关怀上不够到位。
        </td>
    </tr>
</table>



## 需求分析

> 初赛阶段完成

### 数据需求

> 阐述该项目所需要的各种数据。

#### 静态数据

#### 动态数据

#### 数据词典

#### 数据采集

> 阐述数据是如何获取到的。

### 功能需求

> 阐述该项目所需要的核心功能，对核心功能进行业务逻辑层面的描述

#### 功能模块

> 包含功能模块描述表，功能用例图及用例规约表。

### 性能需求

#### 时间特性

> 如响应时间、更新处理时间、数据转换与传输时间、运行时间

#### 适应性

> 在操作方式、运行环境、与其他软件的接口等发生变化时，应具有的适应能力

### 界面需求

> 要求给出4.2中涉及到的所有功能模块的界面原型示意图。界面中的每个组件元素要求给出注解。

### 接口需求

#### 硬件接口

> 若项目需要依赖于某些硬件的能力，则需要阐述清楚使用的硬件是什么以及硬件的接口和其调用方式。若不需要依赖硬件能力则填“无”。

#### 软件接口

> 软件接口定义了软件对外部服务（如：翻译服务、语音识别服务）的依赖与交互方式以及对外提供服务的方式。若无外部接口则填“无”。

### 其他需求

> 如可使用性、安全性、可维护性、可移植性

## 概要设计

> 复赛阶段完成

### 处理流程

> 包含逻辑流程图和数据流程图

### 总体结构设计

> 模块架构图及其描述

### 功能设计

> 功能模块结构图及其描述

### 数据流转设计

> 数据流转流程图及其描述

### 用户界面设计

> 复赛阶段要求提供核心功能模块的运行使用界面。决赛阶段要求给出4.2中涉及到的所有功能模块的运行使用界面。

### 数据结构设计

### 接口设计

#### 外部接口

> 阐述该软件与其他系统的调用接口。包括软件接口、硬件接口

#### 内部接口

> 阐述软件内模块之间的调用接口。包括函数接口、Restful接口等

### 错误/异常处理设计

#### 错误/异常输出信息

#### 错误/异常处理对策

> 设置后备、性能降级、恢复及再启动等

### 系统配置策略

### 系统部署方案

### 跨端应用架构设计

> 多端应用之间为满足交互协同、能力共用而做的通用协议、架构等设计

### 其他相关技术与方案

## 数据库设计

> 复赛阶段完成
> 包含数据库所有的表结构和相关的字段说明。要求提供ER图。

## 手机端侧部署设计

### 手机环境要求

## 详细设计
