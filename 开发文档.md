# 开发文档


 1. # **项目概述**
> 初赛阶段完成
   1. ## **项目背景**
> 用简明扼要的文字叙述清楚该项目所涉及的（业务/技术）领域的现状及存在的问题，对于该项目要解决的问题目前已有的最新、最优解决方案。
1. **音乐的价值和意义**

音乐是一种艺术形式，指通过将不同的声音人为地组织起来，而创造出的一种具有表现力的内容。它包括形式、和声、旋律、节奏等。自古以来，音乐与人们的生活息息相关。它反映、影响着人们的情绪，拥有着巨大的能量。它能够唤起强烈的情感反应，带给我们快乐，悲伤，甚至怀念逝去的时光。它能够传递丰富的信息，即使不通过语言。

正是因为音乐的这种特性，它能够在困难时期为人们提供情感支持，在积极时刻鼓舞人们、成为令人振奋的动力。根据相关研究，音乐是对抗焦虑诱发情况(如考试)的有效工具，因为它能够分散消极思想的注意力，有助于保持足够低的压力水平，有助于人们的心理健康。

1. ` `**在线音乐app市场稳步增长**

根据中国互联网络信息中心数据，2020年中国在线音乐娱乐市场用户人数达到6.58亿人。近年来稳步上升，达到7亿以上用户。由会员订阅、数字专辑销售、广告服务及授权业务等为主的营收方式持续吸金，市场规模自2017年的42亿元，达到2021年底的177亿。可以说，在线音乐app成为大众听音乐的主要选择。

1. **现有音乐app难以满足用户需求。**

目前，市面上的音乐app已经十分成熟，也都拥有着庞大的用户基数、较为完善的功能。但在某些方面，仍无法满足用户需求。

**音乐推荐系统不够“机灵”，缺少对用户情绪的关注。**现有的市面上的音乐软件，主要使用“标签”作为推荐歌曲的依据。根据标签，系统可以将与用户所听歌曲相似歌手、流派的歌曲等推发给用户，从而能够让用户“听我想听”，满足用户品味。而这样的做法存在着一定的局限性。要知道，对用户来说，听歌的动机与情绪和状态挂钩，具有很大的不确定性。例如，在情绪高涨的时候，用户会想要听一些激昂、充满力量的乐曲；在情绪失落时，用户会想要听一些安静的乐曲。而在使用现有主流音乐app时，由于缺乏对于用户情绪和状态的关注，在推送时会出现用户收到的推送不符合当前情绪预期的情况。

**以“歌单”为主要形式的分类方式，存在一定的局限性。**一方面，歌单仅仅是一组音乐的集合，它难以记录用户对于歌曲的感受。因此，软件并不能了解用户对于歌曲的具体感受，更不能在特定的环境下推送相应感受的歌曲，达到“知人冷暖”的效果。再者，歌单的分类方式极为繁琐，一个特定的风格、听歌场景就需要建立一张歌单。为了细化听歌场景，用户就需要建立许多许多的歌单。而在歌单间切换也十分繁琐。

**社交功能较为薄弱。**除了评论区以外，几乎没有社交的相关功能。而这其中又不乏机器人、刷屏和水军，体验很差。用户真正需要的是灵魂相契、志同道合的朋友。而品味这个包含复杂内容的名词，很难在评论区的三言两语间体现其全貌，需要依凭长时间的听歌习惯才能显现。

1. **我们的解决方案**

“XX”项目以“情感+社交”为宗旨，基于端云结合的理念和OPPO AI框架的算法支持，关注用户对歌曲的个人感受以及在听歌时的情感状态，让音乐抚慰灵魂。并关注社交，希望打造品味相同的灵魂连接的通道。

针对目前主流音乐软件的痛点，本项目采用“音乐手账”的形式，打造用户收藏音乐、感受音乐的媒介。让音乐不再是冷冰冰的歌单，而是夹杂着个人情感的手账珍藏。另外，采用XXX的技术，提取歌曲主要情绪状态，并结合手机和智能设备相关数据、情景识别等技术，识别用户状态，以实现基于用户当前状态的歌曲推荐系统，满足用户在不同心理状态下的听歌需求。用户的心理状态信息还可帮助我们关怀用户心理健康。再者，增加歌曲的分类方式，除“歌手”“专辑”“歌单”等分类依据外，增加“标签”“状态”等，实现更细致的歌曲分类，而这也能帮助我们实现更精准的歌曲推送。此外，利用近场通讯等技术，帮助用户找到志同道合的听友。这样一系列做法，实现一个富有人文关怀气息的音乐APP。

1. ## **项目定位**

   1. ### **应用场景**
> 需要重点突出这些场景下的作者观察到的，并且准备在作品里面解决的痛点。

      **场景一：随时随地听心仪的音乐。**

随着网络音乐的普及，音乐服务触手可及。大众养成了网络听歌的习惯，越来越多的人喜欢使用手机听取音乐。这一动作可以是在书房里、在路上、在地铁上，在清晨、在午后、在睡前，在开心时、在低落时。人们随时随地都可以掏出手机，播放自己喜欢的音乐。

对于这个应用场景，主流的音乐app都实现了“随时随地”，而在“心仪”一词上，并不是一直能够满足用户的需求。**1.**例如，用户A在睡前打开音乐app，选定“我喜欢”歌单，想要舒缓一下心情、进入睡眠状态。在这个过程中，传统音乐软件只是按照一定的顺序播放这张歌单，并不能基于用户当前的状态筛选对应的歌曲、进而推送给用户。因此会有可能推送一些过于欢快的歌曲，让用户A觉得聒噪，甚至退出音乐软件。而我们的做法是：结合时间地点等基本数据、用户是否跳过歌曲的监测数据、“音乐手账”能够获得的用户的文字数据、以及智能硬件设备获取的用户状态数据（例如手表的心率、运动状态等数据）等，对用户所听歌单内歌曲再做一定的筛选。例如检测到用户心率过快、压力过大，则倾向于给用户推送舒缓的音乐，达到放松的效果。监测到用户正在跑步，则更多地推送激昂的音乐。这样，音乐的推送更加灵活精准。**2.**此外，用户有时不只想听一张歌单中的歌，因此我们通过混合播放的方式，用户可选取多张歌单，系统将通过算法，结合多方面数据，合成一张总的播放列表。这样用户就不必在app中忙于切换歌单了。**3.**增加歌曲分类依据，在传统软件中，包含“歌手”“专辑”“歌单”等分类依据。我们允许用户为歌曲增加“标签”“状态”的描述。“标签”是对于歌曲基本信息的描述，如“国语”“爱豆”“摇滚”等等；而“状态”则是用户对于一首歌的主观感受，它可以是动作、情绪和场景。例如“阅读”代表用户认为这些歌曲给人的感觉是他在阅读；而“安静”代表用户认为这些歌给人的感觉是安静；“海边”代表用户听到这首歌时仿佛看到了广袤的大海。通过歌手、专辑、歌单、标签、状态的定义，用户更容易找出自己想听的歌。推荐系统的推荐依据也更加详细。

例如，用户B在某天十分失落，带了一本书到咖啡馆，想要在午后听一些粤语的歌释放一下。那么她便可以选定“咖啡馆”+“阅读”+“down”的状态，以及“粤语”的tag，还可以选择“陈奕迅”这个歌手，点击“混合播放”，系统则会依据算法选定相应的歌生成一张播放列表开始播放。这个方式的灵活性很强，在其他场景下可以将不同的元素混搭，也可以预设几组常用的元素组合，例如“打工+写代码”“跑步+午后”“考研+静谧”等等。而这些播放列表无疑是更加符合用户需求的和满足特定场景的。

**场景二：达成心理状态记录和关怀**

音乐和情绪是十分挂钩的。音乐能体现创作者的情绪，也能影响听众的情绪。而用户选择的歌曲也能在一定程度上反应用户当时的心理状态。根据用户的听歌规律，再结合听歌时的其他相关数据，我们可以挖掘出用户心理状态的一些变化。而主流音乐app很少关注音乐和用户情绪的关联关系，仅仅是记录如“某年某日某歌”这种较为低层次的统计信息。按照我们的设计，我们可以对用户听歌的习惯及状态的变化进行记录，并时常生成报表，向用户展示一段时间内的心理健康状态，有助于用户及时意识心理健康问题，进而及时调整。此外，app界面以及手表表盘、周围的氛围灯等家居产品等也会由音乐生成不同的可视化效果，让音乐由可听变得可视，增强用户对音乐的感知，具有更好的互动感。程序内置的虚拟形象在监测出用户的情绪变化时，能够与其进行沟通，进一步缓解用户的不良状态。这样的沟通感无疑是当下许多具有心理问题的用户所需要的。

**场景三：音乐鉴赏和收藏**

在读书时，我们喜欢摘抄佳句、标注出处，撰写书评。而音乐与读书一样，都属于文艺作品，本身就具备被赏析和收藏的品质。而传统音乐app的“收藏夹”则更像一个带了新型按钮的大号歌单。它仅仅能储存，却不能实现诸如“批注”“赏析”这样高级的功能。

读书笔记（或手账）是书写的人阅读的佳句和情感的集合。如果只有佳句，则文字会变得冷冰冰。对于音乐app用户来说，用户缺乏一个可以收藏音乐的“音乐手账”，它存放着用户听音乐时的记忆片段，是音乐的情感的集合体。当用户将音乐夹杂着听时的文字、语音存入手账，就仿佛将情感放入了一颗时间胶囊。当用户打开它，播放的音乐夹杂着旧时的感受一并涌入用户的心扉。它区别于普通手账，因为它“可听”；它也不同于普通收藏夹，因为它“可读”。想象一下这个场景：用户A很喜欢和男朋友在散步时一起听歌，在结束一天的散步后，回到家中，就将今日听到的歌、附上一些碎碎念写入手账。当她再次打开这本手账，不仅仅能够听到这首歌，还能回想起那条幽静的小径、那天和男友月下的牵手。而这首歌也因为这些变得更加报满、丰富。听歌这个动作也不再是单单的听，多了感受、表达和思念。

**场景四：音乐社交和沟通**

毫无疑问，人们更喜欢与志趣相投的人聊天。而音乐对于交友也是个很不错的载体。而主流音乐app的交友功能往往仅限于评论区等地了，而在这之中不乏有机器人、水军等。在我们的设计中，app通过分析用户听歌习惯和品味，可以给用户匹配网络上品味相同的陌生人。此外，通过近场通讯等手段，可以在现实中找到正在听一首歌的陌生人。而“听友雷达”让每一个与自己听着相同音乐的人，都会以星点的样式呈现在地图上，让用户看到这个世界上有多少与自己相同的星星。这样的社交设计，可以帮助用户找到更多相似的人和朋友。

1. ### **目标人群**

   （1）想要单纯听音乐的用户，为其提供完整优质的音乐服务和科学的音乐分类、推送等。

（2）想要记录自己听歌日志、收藏音乐的用户。为其提供高质量的音乐手账服务，供其记录音乐和生活。

（3）想要通过音乐结交听友的用户，为其提供完整的音乐社区和精准的听友匹配。

1. ## **项目方案**
> 用简明扼要的文字叙述清楚该项目中问题空间到解空间的映射关系，比如：“对于xxx问题，该项目通过xxx来实现xxx”。

   **对于音乐资源库问题，**依托网易云音乐开源项目进行开发，可以享用用户在网易云音乐上享用的基本音乐权益。

**对于音乐可视化问题，**

**对于音乐推送问题，**

**对于情感提取问题，**

**对于ai对话问题，**

1. ## **项目目标**

   （1）“XX”项目以“情感+社交”为宗旨，基于端云结合的理念和OPPO AI框架的算法支持，关注用户对歌曲的个人感受以及在听歌时的情感状态，实现更精准的音乐分类和推送，使用户心仪的音乐“触手可及”。

（2）给予用户一个鉴赏、收藏音乐的工具，利用可视化、音乐手账等手段，让音乐不仅仅可听，还可读、可感受，增强人与音乐的交互感，让音乐抚慰灵魂。

（3）关注社交，希望打造品味相同的灵魂连接的通道。

（4）关注用户情感健康状态，希望能够让音乐辅助用户心理健康关怀。

1. ## **项目价值**

   “XX”让用户心仪的音乐更加“触手可及”。用户不用再从不同的歌单间翻来覆去，苦苦搜寻。借助更加细致、自定义程度高的歌曲分类方法，用户可以更精准便捷地找到自己心仪的音乐。借助更科学有效的推送方式，音乐推送不仅仅限于流派等，变得更加精准。这是一款“更懂用户”的音乐软件。

“XX”通过音乐手账的组织方式，成为用户收藏、记录歌曲的渠道，解决了用户无处记录听歌感受的问题。用户的歌曲不单单可听，也变得可读。音乐和情感更加紧密的结合在一起，而不再是一个个冷酷的播放列表。

“XX”解决了用户难以寻找听友的问题。不同品味的用户可以被推送到一起，通过听友雷达，找到天南海北的同好，十分便捷。

“XX”提高了用户与音乐的交互感。音乐可听、可视、可读，变得更加立体和饱满；音乐系统会机灵地监测用户状态作出不同推荐。让音乐也是“有人情味的”。


## 2    开发计划
> 初赛阶段完成
### 2.1   最终呈现形式

 软件：具有完整功能的应用软件

文档：技术研究报告，项目开发文档，项目测试文档，创新性分析报告

核心技术：用户情绪识别并与音乐情绪相匹配，一定范围内用户信息共享

### 2.2   主要功能描述

产品将听歌作为用户主要活动，在传统的获取歌曲后收听歌曲的基础上开发情绪识别、音乐手账、音乐可视化、音乐助手等多项功能，涵括音乐推荐、个人记录、社交娱乐等模块。

#### 2.2.1   音乐推荐模块

产品可以根据用户情绪、用户场景、好友信息等输入进行音乐推荐。

**1.**   **情绪匹配功能**

通过用户编写的心情日记、手环记录、与音乐助手对话、当前时间和天气等数据识别用户情绪，为用户推荐相关情绪歌曲，达到舒缓负面情绪，保持良好情绪的目的。

**2.**   **场景感知功能**

使用场景感知相关的接口，通过移动设备的状态，感知用户当前的运动状态，推荐符合状态的音乐。例如在用户跑步的时候可以推荐节奏感较强的歌曲，或是直接推荐适合跑步的歌单。

**3.**   **音乐助手功能**

使用AI问答机制，可以在与用户的交流过程中，分析用户情绪，作为音乐推荐的一个输入指标。除此之外，还提供互动小游戏、软件功能快捷入口。

**4.**   **好友推荐功能**

为了增强好友之间的互动性，会对好友在听的歌曲进行部分推荐。

#### 2.2.2   个人记录模块

音乐常常会引起用户思绪，激发用户思考，为了方便用户记录，本产品为用户提供了音乐手账、音乐可视化的功能。

**1.**   **音乐手账功能**

音乐手账允许用户以文字、图片、表情、相关歌曲的形式记录心情状态。可以按照日期，不同类型对记录的内容进行划分，方便用户查看。如果用户愿意，也可以选择以匿名或是公开的方式发布到广场上，与其他用户共享。

**2.**   **音乐可视化功能**

当用户听到符合自己心情或是状态的歌曲时，可以通过音乐可视化的功能对该歌曲进行从听觉向视觉的转化，生成手机壁纸或是手表表盘，将抽象化的音频具象化，更好地记录所喜爱的歌曲。

#### 2.2.3   社交娱乐模块

随着交友方式的多样化，音乐交友的形式也逐渐进入市场，本产品同时为有社交需求的群体提供了社交和互动的平台。

**1.**   **近场共享功能**

用户通过开启近场功能，在其他人开放权限的前提下，可以与路过的人共享歌单，营造出“擦肩而过”的氛围感；也可以聆听处在同一个空间中的其他人正在享受的音乐，获得“同频共振”的互动感。

**2.**   **社区交流功能**

用户可以通过搜索id的形式添加好友，关注好友动态。对于非好友用户，可以在社区广场上公开发布自己的想法和感受，与他人交流；也允许通过匿名的方式在树洞中写下悄悄话，等待着有缘人产生共鸣。

### 2.3   运行环境

#### 2.3.1   手机端

1. Android系统

| 硬件 | 内存     | 8G以上                   |
| ---- | -------- | ------------------------ |
| 软件 | 操作系统 | 支持Android4.2及以上版本 |

2. iOS系统

支持iphone6及以上版本

#### 2.3.2   手表/手环端

具备心率检测功能的手表/手环。

 

### 2.4   验收标准

#### 2.4.1   验收内容

**1.**   **功能验收**

对需求分析中功能需求所提到的所有功能进行逐一测试，要求如下：

（1）  不存在错误等级为1的错误；

（2）  不存在错误等级为2的错误；

（3）  错误等级为3的错误数量≤5；

（4）  所有提交的错误都已得到更正；

（5）  测试用例不通过数的比例<1.5%。

**2.**   **非功能验收**

要求系统具有较强的容错性、安全性和易用性，响应时间等性能达到需求分析中要求的。

**3.**   **文档验收**

要求各文档内容完整，表述正确清晰，易于理解。文档包括：

（1）  项目开发文档；

（2）  技术研究报告；

（3）  创新性分析报告；

（4）  项目测试文档。

#### 2.4.2   错误类型定义

**1.**   **一级错误描述**

属于致命错误。如：没有实现或错误地实现重要功能；业务流程存在重大隐患；系统在操作过程中由于系统自身的原因自动退出系统或出现死机的情况；系统在操作过程中由于系统自身的原因对系统或数据造成破坏；在现有的软、硬件环境下不能实现应有的功能。

**2.**   **二级错误描述**

属于严重错误。没有实现基本功能，并且不存在替代办法；没有实现重要功能中的部分功能，并且不存在替代办法；业务流程衔接错误；用户的权限分配不合理；没有满足系统的性能要求。

**3.**   **三级错误描述**

属于一般错误。与二级错误相对应，而三级错误则存在代替方法；对误操作或错误操作没有提示，导致非法数据进入数据；用户界面差和操作时间长。

**4.**   **四级错误描述**

属于微小错误。通常为易用性方面的错误，对功能性没有影响。比如界面不友好、前后风格不一；中英文混杂；查询结果输出不直观等。

### 2.5   关键问题
> 说明可能影响项目的关键问题，如设备条件、技术焦点或其他风险因素，并说明对策。

**1.**   **情绪识别的精确度**

本项目很重要的一个推荐来源是用户的情绪识别，需要对相关的多源数据进行较好的提取与整合，确保识别的情绪不会出现较大的误差，并能与歌曲的情绪特征实现良好匹配。

**2.**   **跨平台的共享**

产品希望在多设备之间产生交流与融合，包括不同用户的手机端和同一用户的不同设备，需要设备间实现合理的算力调度与信息共享。

 

### 2.6   进度安排

| **内容**                     | **完成时间**   |
| ---------------------------- | -------------- |
| **完成功能设计**             | **2022.12.10** |
| **完成主要模型选型**         | **2023.1.16**  |
| **完成原型图设计**           | **2023.1.30**  |
| **初步完成情绪识别模块**     | **2023.3.1**   |
| **初步完成近场通信模块**     | **2023.3.8**   |
| **初步完成推荐系统模块**     | **2023.3.10**  |
| **测试并改进上方3个模块**    | **2023.3.15**  |
| **根据原型图制作大部分界面** | **2023.3.15**  |
| **完成社交娱乐模块后端搭建** | **2023.3.23**  |
| **完成个人记录模块后端搭建** | **2023.3.25**  |
| **完成前后端对接**           | **2023.3.26**  |
| **将各模型整合至App中**      | **2023.3.30**  |
| **测试App并优化**            | **2023.4.6**   |
| **性能与美观进一步优化**     | **2023.4.14**  |
| **项目完成**                 | **2023.4.15**  |

 

### 2.7   开发预算
> 此项对基于硬件和依赖于其他平台及服务的项目十分重要。

| 名称      | 预算        |
| --------- | ----------- |
| GPU服务器 | 4812元/半年 |
| 云数据库  | 1300元/半年 |
| 云服务器  | 689云/半年  |


## 可行性分析

> 初赛阶段完成

### 技术可行性分析

### 资源可行性分析

### 市场可行性分析

## 需求分析

> 初赛阶段完成

### 数据需求

> 阐述该项目所需要的各种数据。

#### 静态数据

#### 动态数据

#### 数据词典

#### 数据采集

> 阐述数据是如何获取到的。

### 功能需求

> 阐述该项目所需要的核心功能，对核心功能进行业务逻辑层面的描述

#### 功能模块

> 包含功能模块描述表，功能用例图及用例规约表。

### 性能需求

#### 时间特性

> 如响应时间、更新处理时间、数据转换与传输时间、运行时间

#### 适应性

> 在操作方式、运行环境、与其他软件的接口等发生变化时，应具有的适应能力

### 界面需求

> 要求给出4.2中涉及到的所有功能模块的界面原型示意图。界面中的每个组件元素要求给出注解。

### 接口需求

#### 硬件接口

> 若项目需要依赖于某些硬件的能力，则需要阐述清楚使用的硬件是什么以及硬件的接口和其调用方式。若不需要依赖硬件能力则填“无”。

#### 软件接口

> 软件接口定义了软件对外部服务（如：翻译服务、语音识别服务）的依赖与交互方式以及对外提供服务的方式。若无外部接口则填“无”。

### 其他需求

> 如可使用性、安全性、可维护性、可移植性

## 概要设计

> 复赛阶段完成

### 处理流程

> 包含逻辑流程图和数据流程图

### 总体结构设计

> 模块架构图及其描述

### 功能设计

> 功能模块结构图及其描述

### 数据流转设计

> 数据流转流程图及其描述

### 用户界面设计

> 复赛阶段要求提供核心功能模块的运行使用界面。决赛阶段要求给出4.2中涉及到的所有功能模块的运行使用界面。

### 数据结构设计

### 接口设计

#### 外部接口

> 阐述该软件与其他系统的调用接口。包括软件接口、硬件接口

#### 内部接口

> 阐述软件内模块之间的调用接口。包括函数接口、Restful接口等

### 错误/异常处理设计

#### 错误/异常输出信息

#### 错误/异常处理对策

> 设置后备、性能降级、恢复及再启动等

### 系统配置策略

### 系统部署方案

### 跨端应用架构设计

> 多端应用之间为满足交互协同、能力共用而做的通用协议、架构等设计

### 其他相关技术与方案

## 数据库设计

> 复赛阶段完成
> 包含数据库所有的表结构和相关的字段说明。要求提供ER图。

## 手机端侧部署设计

### 手机环境要求

## 详细设计
